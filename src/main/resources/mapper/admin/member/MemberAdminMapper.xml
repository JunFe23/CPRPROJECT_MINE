<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.CPR.redHome.mapper.admin.member.MemberAdminMapper">

    <!-- 전체 회원 조회. -->
    <select id="selectAllMember" resultType="com.CPR.redHome.dto.member.MemberDto">
        select
            member_id as memberId
            ,account_id as accountId
            ,member_password as memberPassword
            ,name as name
            ,telephone as telephone
            ,email as email
            ,created_date as createdDate
            ,address as address
            ,birthdate as birthdate
            ,point as point
            ,role as role
            ,grade_id as gradeId
        from member
    </select>

    <!-- 나이대 별 회원 조회 -->
    <select id="selectMemberByAge" resultType="java.util.LinkedHashMap">
        SELECT
            COUNT(case when age BETWEEN 10 and 19 then 1 end) as "10대",
            COUNT(case when age BETWEEN 20 and 29 then 1 end) as "20대",
            COUNT(case when age BETWEEN 30 and 39 then 1 end) as "30대",
            COUNT(case when age BETWEEN 40 and 49 then 1 end) as "40대",
            COUNT(case when age BETWEEN 50 and 59 then 1 end) as "50대",
            COUNT(case when age > 60 then 1 end) as "60s"
        FROM (SELECT substr(NOW(),1,4)-substr(birthdate,1,4)+1 age from member) T
    </select>


</mapper>